//User 테이블

CREATE TABLE `user` (
	`id` BIGINT(20) NOT NULL AUTO_INCREMENT,
	`loginId` TEXT NOT NULL COLLATE 'utf8mb3_general_ci',
	`password` TEXT NOT NULL COLLATE 'utf8mb3_general_ci',
	`name` TEXT NOT NULL COLLATE 'utf8mb3_general_ci',
	`nickName` TEXT NOT NULL COLLATE 'utf8mb3_general_ci',
	`introduce` TEXT NOT NULL COLLATE 'utf8mb3_general_ci',
	`email` TEXT NOT NULL COLLATE 'utf8mb3_general_ci',
	`role` TEXT NOT NULL COLLATE 'utf8mb3_general_ci',
	`status` TEXT NOT NULL COLLATE 'utf8mb3_general_ci',
	PRIMARY KEY (`id`) USING BTREE
)
COLLATE='utf8mb3_general_ci'
ENGINE=InnoDB
;

//Post 테이블

CREATE TABLE `post` (
	`id` BIGINT(20) NOT NULL AUTO_INCREMENT,
	`title` TEXT NULL DEFAULT NULL COLLATE 'utf8mb3_general_ci',
	`content` TEXT NULL DEFAULT NULL COLLATE 'utf8mb3_general_ci',
	`date` TINYTEXT NULL DEFAULT NULL COLLATE 'utf8mb3_general_ci',
	`user_id` BIGINT(20) NULL DEFAULT NULL,
	`category_id` BIGINT(20) NULL DEFAULT NULL,
	PRIMARY KEY (`id`) USING BTREE,
	INDEX `category_id_post` (`category_id`) USING BTREE,
	INDEX `user_id_post` (`user_id`) USING BTREE,
	CONSTRAINT `category_id_post` FOREIGN KEY (`category_id`) REFERENCES `sss`.`category` (`id`) ON UPDATE RESTRICT ON DELETE RESTRICT,
	CONSTRAINT `user_id_post` FOREIGN KEY (`user_id`) REFERENCES `sss`.`user` (`id`) ON UPDATE RESTRICT ON DELETE RESTRICT
)
COLLATE='utf8mb3_general_ci'
ENGINE=InnoDB
;

//Category 테이블

CREATE TABLE `category` (
	`id` BIGINT(20) NOT NULL AUTO_INCREMENT,
	`name` VARCHAR(20) NOT NULL DEFAULT '' COLLATE 'utf8mb3_general_ci',
	`board_id` BIGINT(20) NOT NULL DEFAULT '0',
	`superCategory` TEXT NOT NULL COLLATE 'utf8mb3_general_ci',
	PRIMARY KEY (`id`) USING BTREE,
	INDEX `board_id_category` (`board_id`) USING BTREE,
	CONSTRAINT `board_id_category` FOREIGN KEY (`board_id`) REFERENCES `sss`.`board` (`id`) ON UPDATE RESTRICT ON DELETE RESTRICT
)
COLLATE='utf8mb3_general_ci'
ENGINE=InnoDB
;

//Board 테이블

CREATE TABLE `board` (
	`id` BIGINT(20) NOT NULL AUTO_INCREMENT,
	`name` VARCHAR(50) NOT NULL DEFAULT '' COLLATE 'utf8mb3_general_ci',
	PRIMARY KEY (`id`) USING BTREE
)
COMMENT='게시판'
COLLATE='utf8mb3_general_ci'
ENGINE=InnoDB
;


//Comment 테이블

CREATE TABLE `comment` (
	`id` BIGINT(20) NOT NULL AUTO_INCREMENT,
	`content` TEXT NULL DEFAULT NULL COLLATE 'utf8mb3_general_ci',
	`date` TINYTEXT NULL DEFAULT NULL COLLATE 'utf8mb3_general_ci',
	`post_id` BIGINT(20) NULL DEFAULT NULL,
	`user_id` BIGINT(20) NULL DEFAULT NULL,
	PRIMARY KEY (`id`) USING BTREE,
	INDEX `post_id_comment` (`post_id`) USING BTREE,
	INDEX `user_id_comment` (`user_id`) USING BTREE,
	CONSTRAINT `post_id_comment` FOREIGN KEY (`post_id`) REFERENCES `sss`.`post` (`id`) ON UPDATE RESTRICT ON DELETE RESTRICT,
	CONSTRAINT `user_id_comment` FOREIGN KEY (`user_id`) REFERENCES `sss`.`user` (`id`) ON UPDATE RESTRICT ON DELETE RESTRICT
)
COLLATE='utf8mb3_general_ci'
ENGINE=InnoDB
;

//Recommend 테이블

CREATE TABLE `recommend` (
	`id` BIGINT(20) NOT NULL AUTO_INCREMENT,
	`user_id` BIGINT(20) NULL DEFAULT NULL,
	`post_id` BIGINT(20) NULL DEFAULT NULL,
	PRIMARY KEY (`id`) USING BTREE,
	INDEX `user_id_recommend` (`user_id`) USING BTREE,
	INDEX `post_id_recommend` (`post_id`) USING BTREE,
	CONSTRAINT `post_id_recommend` FOREIGN KEY (`post_id`) REFERENCES `sss`.`post` (`id`) ON UPDATE RESTRICT ON DELETE RESTRICT,
	CONSTRAINT `user_id_recommend` FOREIGN KEY (`user_id`) REFERENCES `sss`.`user` (`id`) ON UPDATE RESTRICT ON DELETE RESTRICT
)
COLLATE='utf8mb3_general_ci'
ENGINE=InnoDB
;

//Report 테이블

CREATE TABLE `report` (
	`id` BIGINT(20) NOT NULL AUTO_INCREMENT,
	`post_id` BIGINT(20) NULL DEFAULT NULL,
	`comment_id` BIGINT(20) NULL DEFAULT NULL,
	PRIMARY KEY (`id`) USING BTREE,
	INDEX `post_id_report` (`post_id`) USING BTREE,
	INDEX `comment_id_report` (`comment_id`) USING BTREE,
	CONSTRAINT `comment_id_report` FOREIGN KEY (`comment_id`) REFERENCES `sss`.`comment` (`id`) ON UPDATE NO ACTION ON DELETE NO ACTION,
	CONSTRAINT `post_id_report` FOREIGN KEY (`post_id`) REFERENCES `sss`.`post` (`id`) ON UPDATE NO ACTION ON DELETE NO ACTION
)
COLLATE='utf8mb3_general_ci'
ENGINE=InnoDB
;

//ReportInfo 테이블

CREATE TABLE `reportinfo` (
	`id` BIGINT(20) NOT NULL AUTO_INCREMENT,
	`report_id` BIGINT(20) NOT NULL DEFAULT '0',
	`reason` ENUM('Y','N') NULL DEFAULT NULL COLLATE 'utf8mb3_general_ci',
	`user_id` BIGINT(20) NOT NULL DEFAULT '0',
	PRIMARY KEY (`id`) USING BTREE,
	INDEX `report_id_reportinfo` (`report_id`) USING BTREE,
	INDEX `user_id_reportinfo` (`user_id`) USING BTREE,
	CONSTRAINT `report_id_reportinfo` FOREIGN KEY (`report_id`) REFERENCES `sss`.`report` (`id`) ON UPDATE RESTRICT ON DELETE RESTRICT,
	CONSTRAINT `user_id_reportinfo` FOREIGN KEY (`user_id`) REFERENCES `sss`.`user` (`id`) ON UPDATE RESTRICT ON DELETE RESTRICT
)
COLLATE='utf8mb3_general_ci'
ENGINE=InnoDB
;
